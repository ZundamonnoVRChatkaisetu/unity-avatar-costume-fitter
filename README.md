# 全アバター衣装自動調整ツール

このツールは、アバターに衣装を自動的に最適化するUnityエディタ拡張です。

## 特徴

- すべてのアバターに対応
- すべての衣装に対応
- 手動ボーンマッピング機能でアバターと衣装の対応関係を調整可能
- リアルタイム微調整機能
- ツール情報をUI内に表示

## 使い方

1. Unityのメニューバーから「ずん解」→「衣装調整ツール」を選択
2. アバターと衣装をドラッグ＆ドロップで選択
3. 「ボーンマッピング」タブでアバターと衣装のボーン対応関係を確認・調整
4. 「衣装を着せる」ボタンをクリック
5. スライダーを動かして細部を微調整

## インストール方法

1. このリポジトリをダウンロードまたはクローン
2. Unityプロジェクトの「Assets」フォルダに配置
3. これだけで使用可能になります

## 要件

- Unity 2019.4以降
- ヒューマノイドアバター

## 最新の改善点 (v1.2)

- **手動ボーンマッピング機能の追加**: アバターと衣装のボーン対応関係をUIで確認・調整可能に
- **マッピング可視化**: 現在のマッピング状態が「自動検出」または「手動設定」として表示
- **フィルタリング機能**: 特定のボーン名で検索して素早く見つけられるように
- **衣装固定問題の解決**: 衣装の一部が固定される問題を解決
- **ボーン名の違いに対応**: 異なるボーン名でも位置や階層構造を考慮して正確にマッピング

## 以前の改善点 (v1.1)

- 衣装サイズがアバターに正確に一致するようになりました
- 微調整スライダーがリアルタイムで変更を反映するようになりました
- ツール説明がツールUIの中に表示されるようになりました
- ボーンマッピングの精度が大幅に向上しました
- エディタの更新機能が強化され、変更がすぐに見えるようになりました

## ボーンマッピングの使い方

1. アバターと衣装を選択すると「ボーンマッピング」タブが利用可能になります
2. アバターのボーンと衣装のボーンの対応関係が表示されます
3. 自動検出できなかったボーンや、誤った対応になっている場合は手動で変更できます
4. ドロップダウンから対応する衣装のボーンを選択してください
5. マッピングをリセットボタンを押すと自動検出に戻ります

## 問題が発生した場合

衣装がうまく適用されない場合は、以下を確認してください：

1. ボーンマッピングが正しく設定されているか（「ボーンマッピング」タブで確認）
2. 特に重要なボーン（Hips、Spine、Chest、Head など）が正しくマッピングされているか
3. 詳細設定で「自動サイズ調整」と「ウェイト最適化」がオンになっているか
4. 微調整スライダーを使用して手動で調整を試みたか

それでも問題が解決しない場合は、「全体スケール」の値を調整してみてください。